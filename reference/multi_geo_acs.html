<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fetch an ACS table with multiple geography levels — multi_geo_acs • cwi</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fetch an ACS table with multiple geography levels — multi_geo_acs" />
<meta property="og:description" content="Fetch a data table from the ACS via tidycensus with your choice of geographies at multiple levels. For geographies made of aggregates, i.e. neighborhoods made of tracts or regions made of towns, the returned table will have estimates summed and margins of error calculated for the whole area." />
<meta property="og:image" content="https://CT-Data-Haven.github.io/cwi/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cwi</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/basic-workflow.html">Basic workflow</a>
    </li>
    <li>
      <a href="../articles/shapefiles.html">Shapefiles</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CT-Data-Haven/cwi">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fetch an ACS table with multiple geography levels</h1>
    <small class="dont-index">Source: <a href='https://github.com/CT-Data-Haven/cwi/blob/master/R/multi_geo_acs.R'><code>R/multi_geo_acs.R</code></a></small>
    <div class="hidden name"><code>multi_geo_acs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fetch a data table from the ACS via <code>tidycensus</code> with your choice of geographies at multiple levels. For geographies made of aggregates, i.e. neighborhoods made of tracts or regions made of towns, the returned table will have estimates summed and margins of error calculated for the whole area.</p>
    </div>

    <pre class="usage"><span class='fu'>multi_geo_acs</span>(
  <span class='no'>table</span>,
  <span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2017</span>,
  <span class='kw'>neighborhoods</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>towns</span> <span class='kw'>=</span> <span class='st'>"all"</span>,
  <span class='kw'>regions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>counties</span> <span class='kw'>=</span> <span class='st'>"all"</span>,
  <span class='kw'>state</span> <span class='kw'>=</span> <span class='st'>"09"</span>,
  <span class='kw'>tracts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>blockgroups</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>msa</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>us</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>new_england</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>survey</span> <span class='kw'>=</span> <span class='st'>"acs5"</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>table</th>
      <td><p>A string giving the ACS table number.</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>The year of the ACS table; currently defaults 2017 (most recent available).</p></td>
    </tr>
    <tr>
      <th>neighborhoods</th>
      <td><p>Temporarily deprecated: A named list of neighborhoods with their 11-digit tract GEOIDs (defaults NULL).</p></td>
    </tr>
    <tr>
      <th>towns</th>
      <td><p>A character vector of names of towns to include; <code>"all"</code> (default) for all towns optionally filtered by county; or <code>NULL</code> to not fetch town-level table.</p></td>
    </tr>
    <tr>
      <th>regions</th>
      <td><p>A named list of regions with their town names (defaults <code>NULL</code>).</p></td>
    </tr>
    <tr>
      <th>counties</th>
      <td><p>A character vector of names of counties to include; <code>"all"</code> (default) for all counties in the state; or <code>NULL</code> to not fetch county-level table.</p></td>
    </tr>
    <tr>
      <th>state</th>
      <td><p>A string: either name or two-digit FIPS code of a US state. Required; defaults <code>"09"</code> (Connecticut).</p></td>
    </tr>
    <tr>
      <th>tracts</th>
      <td><p>A character vector of 11-digit FIPS codes of tracts to include, or <code>"all"</code> for all tracts optionally filtered by county. Defaults <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>blockgroups</th>
      <td><p>A character vector of 12-digit FIPS codes of block groups to include, or <code>"all"</code> for all block groups optionally filtered by county. Defaults <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>msa</th>
      <td><p>Logical: whether to fetch New England states' metropolitan statistical areas. Defaults <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>us</th>
      <td><p>Logical: whether to fetch US-level table. Defaults <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>new_england</th>
      <td><p>Logical: if <code>TRUE</code> (the default), limits metro areas to just New England states.</p></td>
    </tr>
    <tr>
      <th>survey</th>
      <td><p>A string: which ACS estimate to use. Defaults to 5-year (<code>"acs5"</code>), but can also be 1-year (<code>"acs1"</code>) or 3-year (<code>"acs3"</code>), though both 1-year and 3-year have limited availability.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical: whether to print summary of geographies included. Defaults <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with GEOID, name, variable code, estimate, moe, geography level, state, and year, as applicable, for the chosen ACS table.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function essentially calls <code><a href='https://rdrr.io/pkg/tidycensus/man/get_acs.html'>tidycensus::get_acs()</a></code> multiple times, depending on geographic levels chosen, and does minor cleaning, filtering, and aggregation. Note that the underlying <code><a href='https://rdrr.io/pkg/tidycensus/man/get_acs.html'>tidycensus::get_acs()</a></code> requires a Census API key. As is the case with other <code>tidycensus</code> functions, <code>multi_geo_acs</code> assumes this key is stored as <code>CENSUS_API_KEY</code> in your <code>.Renviron</code>. See <code><a href='https://rdrr.io/pkg/tidycensus/man/census_api_key.html'>tidycensus::census_api_key()</a></code> for installation.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/tidycensus/man/census_api_key.html'>tidycensus::census_api_key()</a></code>, <code><a href='https://rdrr.io/pkg/tidycensus/man/get_acs.html'>tidycensus::get_acs()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \dontrun{</span>
<span class='fu'>multi_geo_acs</span>(<span class='st'>"B01003"</span>, <span class='fl'>2016</span>,
  <span class='kw'>towns</span> <span class='kw'>=</span> <span class='st'>"all"</span>,
  <span class='kw'>regions</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>inner_ring</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Hamden"</span>, <span class='st'>"East Haven"</span>, <span class='st'>"West Haven"</span>)),
  <span class='kw'>counties</span> <span class='kw'>=</span> <span class='st'>"New Haven County"</span>,
  <span class='kw'>tracts</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span>(<span class='no'>nhv_tracts</span>$<span class='no'>geoid</span>))</div><div class='output co'>#&gt; <span class='message'>Table B01003: TOTAL POPULATION</span></div><div class='output co'>#&gt; <span class='message'>Geographies included:</span>
#&gt; <span class='message'>Towns: all</span>
#&gt; <span class='message'>Regions: inner_ring</span>
#&gt; <span class='message'>Counties: New Haven County</span>
#&gt; <span class='message'>State: 09</span></div><div class='output co'>#&gt; # A tibble: 61 x 9
#&gt;    GEOID    NAME        variable  estimate   moe level   state county       year
#&gt;    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
#&gt;  1 09       Connecticut B01003_0…  3588570    NA 1_state &lt;NA&gt;  &lt;NA&gt;         2016
#&gt;  2 09009    New Haven … B01003_0…   860874    NA 2_coun… 09    &lt;NA&gt;         2016
#&gt;  3 &lt;NA&gt;     inner_ring  B01003_0…   145463    57 3_regi… &lt;NA&gt;  &lt;NA&gt;         2016
#&gt;  4 0900901… Ansonia     B01003_0…    18950    30 4_towns 09    New Haven …  2016
#&gt;  5 0900903… Beacon Fal… B01003_0…     6075    20 4_towns 09    New Haven …  2016
#&gt;  6 0900904… Bethany     B01003_0…     5521    24 4_towns 09    New Haven …  2016
#&gt;  7 0900907… Branford    B01003_0…    28084    28 4_towns 09    New Haven …  2016
#&gt;  8 0900914… Cheshire    B01003_0…    29254    40 4_towns 09    New Haven …  2016
#&gt;  9 0900919… Derby       B01003_0…    12755    25 4_towns 09    New Haven …  2016
#&gt; 10 0900922… East Haven  B01003_0…    29015    24 4_towns 09    New Haven …  2016
#&gt; # … with 51 more rows</div><div class='input'># }
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


